<div class="bg-gray-50 dark:bg-gray-900 p-4 sm:p-6 lg:p-8 min-h-screen">
  <div class="max-w-7xl mx-auto">
    
    <header class="mb-8">
      <h1 class="text-3xl font-bold text-gray-900 dark:text-gray-100">Dashboard de Administração</h1>
      <p class="text-gray-500 dark:text-gray-400 mt-1">Visão geral das estatísticas da aplicação.</p>
    </header>

    <%# Grelha de Cards de Estatísticas (já era responsiva) %>
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
      
      <%# Card: Total de Utilizadores %>
      <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md border dark:border-gray-700 flex items-center space-x-4">
        <div class="bg-blue-100 dark:bg-blue-900/20 p-3 rounded-full">
          <svg class="h-6 w-6 text-blue-600 dark:text-blue-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-4.67c.12-.34-.014-.682-.195-.976l-.004-.012a3.75 3.75 0 01.294-.403 2.25 2.25 0 01.293-.398m-13.5 3.07h.003L.621 19.128c.18-.33.44-.642.754-1.01l.003-.004a4.5 4.5 0 011.996-2.121c.122-.08.25-.153.385-.218a4.5 4.5 0 012.121-1.996l.004-.003c.368-.23.736-.354 1.01-.473l.007-.003a.5.5 0 01.118-.022c.112-.022.227-.022.334-.022l.004 0c.114 0 .23.003.342.01l.004.002c.115.022.225.05.33.08l.005.002a.5.5 0 01.118.05l.002.001z" /></svg>
        </div>
        <div>
          <p class="text-sm font-medium text-gray-500 dark:text-gray-400">Total de Utilizadores</p>
          <p class="text-2xl font-bold text-gray-900 dark:text-gray-100"><%= @user_count %></p>
        </div>
      </div>

      <%# Card: Total de Desafios %>
      <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md border dark:border-gray-700 flex items-center space-x-4">
        <div class="bg-green-100 dark:bg-green-900/20 p-3 rounded-full">
          <svg class="h-6 w-6 text-green-600 dark:text-green-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 01-1.043 3.296 3.745 3.745 0 01-3.296 1.043A3.745 3.745 0 0112 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 01-3.296-1.043 3.745 3.745 0 01-1.043-3.296A3.745 3.745 0 013 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 011.043-3.296 3.746 3.746 0 013.296-1.043A3.746 3.746 0 0112 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 013.296 1.043 3.746 3.746 0 011.043 3.296A3.745 3.745 0 0121 12z" /></svg>
        </div>
        <div>
          <p class="text-sm font-medium text-gray-500 dark:text-gray-400">Total de Desafios</p>
          <p class="text-2xl font-bold text-gray-900 dark:text-gray-100"><%= @challenge_count %></p>
        </div>
      </div>

      <%# Card: Total de Anotações %>
      <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md border dark:border-gray-700 flex items-center space-x-4">
        <div class="bg-amber-100 dark:bg-amber-900/20 p-3 rounded-full">
          <svg class="h-6 w-6 text-amber-600 dark:text-amber-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10" /></svg>
        </div>
        <div>
          <p class="text-sm font-medium text-gray-500 dark:text-gray-400">Total de Anotações</p>
          <p class="text-2xl font-bold text-gray-900 dark:text-gray-100"><%= @note_count %></p>
        </div>
      </div>
      
      <%# Card: Total de Favoritos %>
      <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md border dark:border-gray-700 flex items-center space-x-4">
        <div class="bg-red-100 dark:bg-red-900/20 p-3 rounded-full">
          <svg class="h-6 w-6 text-red-600 dark:text-red-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345h5.364c.54 0 .823.737.424 1.114l-4.29 3.125a.563.563 0 00-.182.635l2.125 5.111a.563.563 0 01-.806.636l-4.29-3.125a.563.563 0 00-.606 0l-4.29 3.125a.563.563 0 01-.806-.636l2.125-5.111a.563.563 0 00-.182-.635l-4.29-3.125a.563.563 0 01.424-1.114h5.364a.563.563 0 00.475-.345l2.125-5.111z" /></svg>
        </div>
        <div>
          <p class="text-sm font-medium text-gray-500 dark:text-gray-400">Total de Favoritos</p>
          <p class="text-2xl font-bold text-gray-900 dark:text-gray-100"><%= @favorite_count %></p>
        </div>
      </div>
    </div>

    <%# --- TABELA RESPONSIVA DE UTILIZADORES RECENTES --- %>
    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md border dark:border-gray-700">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-xl font-semibold text-gray-900 dark:text-gray-100">Utilizadores Recentes</h2>
        <%= link_to "Ver Todos", admin_users_path, class: "text-sm font-medium text-blue-600 dark:text-blue-400 hover:underline" %>
      </div>
      
      <%# Em ecrãs pequenos (<md), a tabela é escondida %>
      <div class="overflow-x-auto hidden md:block">
        <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
          <thead class="bg-gray-50 dark:bg-gray-700">
            <tr>
              <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">E-mail</th>
              <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Data de Registo</th>
              <th scope="col" class="relative px-6 py-3"><span class="sr-only">Editar</span></th>
            </tr>
          </thead>
          <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
            <% @recent_users.each do |user| %>
              <tr>
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-100"><%= user.email %></td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"><%= user.created_at.strftime("%d/%m/%Y") %></td>
                <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                  <%= link_to 'Editar', edit_admin_user_path(user), class: "text-blue-600 dark:text-blue-400 hover:underline" %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>

      <%# Em ecrãs pequenos (<md), mostramos uma lista de cards em vez da tabela %>
      <div class="space-y-4 md:hidden">
        <% @recent_users.each do |user| %>
          <div class="p-4 border rounded-lg dark:border-gray-700">
            <div class="flex justify-between items-center">
              <p class="text-sm font-medium text-gray-900 dark:text-gray-100 truncate"><%= user.email %></p>
              <%= link_to 'Editar', edit_admin_user_path(user), class: "text-sm text-blue-600 dark:text-blue-400 hover:underline flex-shrink-0 ml-4" %>
            </div>
            <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Registado em: <%= user.created_at.strftime("%d/%m/%Y") %></p>
          </div>
        <% end %>
      </div>

    </div>

  </div>
</div>
